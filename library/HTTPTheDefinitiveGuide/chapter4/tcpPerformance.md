[toc]

# 对 TCP 性能的考虑

## HTTP 事务的时延原因

> 与建立 TCP 连接，以及传输请求和响应报文的时间相比，事务处理时间可能是很短的
> 除非客户端或服务器超载，或正在处理复杂的动态资源，否则 **HTTP 时延就是由 TCP 网络时延构成的**

- 客户端首先需要根据 URI 确定 Web 服务器的 IP 地址和端口号
- 接下来，客户端会向服务器发送一条 TCP 连接请求，并等待服务器回送一个请求接受应答
- 一旦连接建立起来了，客户端就会通过新建立的 TCP 管道来发送 HTTP 请求
- 然后，Web 服务器回回送 HTTP 响应，这也需要花费时间

## 性能聚焦区域

### 最常见的 TCP 相关时延

- TCP 连接建立握手
- TCP 慢启动拥塞控制
- 数据聚集的 Nagle 算法
- 用于捎带确认的 TCP 延迟确认算法
- TIME_WAIT 时延和端口耗尽
